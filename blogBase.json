{"singlePage": [], "startSite": "01/19/2025", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "allHead": "", "title": "Hex Blog", "subTitle": "\u662f\u751f\u6d3b\u73a9\u5f04\u4e86\u4f60\uff0c\u8fd8\u662f\u4f60\u4eab\u53d7\u4e86\u751f\u6d3b\uff01", "avatarUrl": "https://avatars.githubusercontent.com/u/64282354?v=4", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/ji-lu-xia-github-da-jian-de-bo-ke.html", "labels": ["\u7f51\u7edc"], "postTitle": "\u8bb0\u5f55\u4e0bgithub\u642d\u5efa\u7684\u535a\u5ba2", "postUrl": "post/ji-lu-xia-github-da-jian-de-bo-ke.html", "postSourceUrl": "https://github.com/edc8/edc8.github.io/issues/1", "commentNum": 0, "wordCount": 89, "description": "## 2025\u5e74-1-19; 16:59 \u4ec5\u8bb0\u5f55\uff01\n###  \u57fa\u4e8egithub\u5f00\u6e90\u9879\u76ee[Gmeek](https://blog.meekdai.com/)\u5b9e\u73b0\u611f\u8c22\u4f5c\u8005\u7684\u5f00\u6e90 !\n\u3002", "top": 0, "createdAt": 1737277195, "style": "", "script": "", "head": "", "ogImage": "https://avatars.githubusercontent.com/u/64282354?v=4", "createdDate": "2025-01-19", "dateLabelColor": "#0969da"}, "P2": {"htmlDir": "docs/post/python -bian-xie-de-wei-xin-dump-wen-jian-fen-xi-ji-qi-ren.html", "labels": ["\u7f16\u7a0b"], "postTitle": "python \u7f16\u5199\u7684\u5fae\u4fe1dump\u6587\u4ef6\u5206\u6790\u673a\u5668\u4eba", "postUrl": "post/python%20-bian-xie-de-wei-xin-dump-wen-jian-fen-xi-ji-qi-ren.html", "postSourceUrl": "https://github.com/edc8/edc8.github.io/issues/2", "commentNum": 0, "wordCount": 23995, "description": "## \u5f97\u76ca\u4e8eAI\u6280\u672f\u7684\u666e\u53ca\uff0c\u8ba9\u6211\u8fd9\u4e2a\u975e\u4e13\u4e1a\u9009\u624b\u4e5f\u80fd\u5b9e\u73b0\u4f7f\u7528python\u5f00\u53d1\u51fa\u81ea\u5df1\u60f3\u8981\u7684\u529f\u80fd\n### \u5728\u6b64\u8bb0\u5f55\u8d34\u51fa\u4ee3\u7801\u7528\u4f5c\u5907\u4efd\u7684 \n### \u65e0\u81ea\u52a8\u56de\u590d\u529f\u80fd\u7248 \n```python\nimport os\nimport time\nimport tkinter as tk\nfrom tkinter import scrolledtext, messagebox\nimport requests\nimport json\nfrom watchdog.observers import Observer\nfrom watchdog.events import FileSystemEventHandler\nimport threading\nimport wxauto\nimport win32clipboard\nimport pythoncom\n\n\nclass DumpFileHandler(FileSystemEventHandler):\n    def __init__(self, text_widget, upload_callback):\n        self.text_widget = text_widget\n        self.upload_callback = upload_callback\n        self.event_processed = {}  \n\n    def on_created(self, event):\n        self.handle_event(event, '\u65b0\u6587\u4ef6\u521b\u5efa')\n\n    def on_modified(self, event):\n        self.handle_event(event, '\u6587\u4ef6\u4fee\u6539')\n\n    def on_deleted(self, event):\n        self.handle_event(event, '\u6587\u4ef6\u5220\u9664')\n\n    def handle_event(self, event, event_type):\n        if event.is_directory:\n            return\n        file_path = event.src_path\n        if file_path.endswith(('.dump', '.bin', '.txt')):\n            if file_path not in self.event_processed:\n                self.text_widget.insert(tk.END, f'{event_type}: {file_path}\\n')\n                self.text_widget.yview(tk.END)\n                self.upload_callback(filepath=file_path)  \n                self.event_processed[file_path] = True\n            else:\n                print(f'\u5df2\u5904\u7406\u8fc7 {file_path} \u7684{event_type}\u4e8b\u4ef6\uff0c\u8df3\u8fc7\u91cd\u590d\u5904\u7406')\n\n\ndef upload(filepath: str) -> str:\n    url = 'http://47.98.235.44:5005/upload'\n    try:\n        with open(filepath, 'rb') as file:\n            files = [\n                ('upload_dump', (os.path.basename(filepath), file, 'application/octet-stream'))\n            ]\n            response = requests.post(url, files=files)\n            if response.status_code == 200:\n                return response.text\n            else:\n                raise Exception(f'Upload failed with status code {response.status_code}')\n    except Exception as e:\n        raise Exception(f'Error uploading file: {str(e)}')\n\n\ndef analysis(uuid: str) -> str:\n    url = 'http://47.98.235.44:5005/analysis'\n    payload = json.dumps({'uuid': uuid})\n    headers = {\n        'Content-Type': 'application/json'\n    }\n    try:\n        response = requests.post(url, headers=headers, data=payload)\n        if response.status_code == 200:\n            return response.text\n        else:\n            raise Exception(f'Analysis request failed with status code {response.status_code}')\n    except Exception as e:\n        raise Exception(f'Error sending analysis request: {str(e)}')\n\n\ndef copy_to_clipboard(output_text: tk.Text):\n    try:\n        root.clipboard_clear()\n        result = output_text.get(1.0, tk.END).strip()\n        root.clipboard_append(result)\n        output_text.insert(tk.END, '\u5206\u6790\u7ed3\u679c\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\\n')\n    except Exception as e:\n        output_text.insert(tk.END, f'\u9519\u8bef: \u590d\u5236\u5230\u526a\u8d34board\u65f6\u53d1\u751f\u9519\u8bef: {str(e)}\\n')\n\n\ndef process_file(filepath: str, output_text: tk.Text, target_group_name):\n    def build_message(data):\n        messages = []\n        if data and data[0]:\n            for item in data[0]:\n                if isinstance(item, dict):\n                    name = item.get('name', '')\n                    values = item.get('value', [])\n                    for value in values:\n                        if isinstance(value, dict):\n                            b = value.get('b', '')\n                            messages.append(f'{name}: {b}')\n        return '\\n'.join(messages) if messages else None\n\n    def handle_analysis_result(analysis_data):\n        if analysis_data.get('code') == 200:\n            data = analysis_data.get('data', [])\n            result_message = build_message(data)\n            if result_message:\n                output_text.delete(1.0, tk.END)\n                output_text.insert(tk.END, f'\u89e3\u6790\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e:\\n{result_message}\\n')\n                copy_to_clipboard(output_text)\n                send_to_wechat(result_message, target_group_name)  # \u8c03\u7528\u53d1\u9001\u5fae\u4fe1\u6d88\u606f\u7684\u51fd\u6570\u5e76\u4f20\u5165\u7fa4\u540d\u79f0\n                return result_message\n            else:\n                warning_message = '\u8be5\u6570\u636e\u6682\u672a\u6536\u5f55'\n                output_text.delete(1.0, tk.END)\n                output_text.insert(tk.END, warning_message + '\\n')\n                copy_to_clipboard(output_text)\n                send_to_wechat(warning_message, target_group_name)  # \u8c03\u7528\u53d1\u9001\u5fae\u4fe1\u6d88\u606f\u7684\u51fd\u6570\u5e76\u4f20\u5165\u7fa4\u540d\u79f0\n                return warning_message\n        else:\n            warning_message = f'\u8b66\u544a: \u89e3\u6790\u5931\u8d25: {analysis_data.get('message')}\\n'\n            output_text.delete(1.0, tk.END)\n            output_text.insert(tk.END, warning_message)\n            copy_to_clipboard(output_text)\n            send_to_wechat(warning_message, target_group_name)  # \u8c03\u7528\u53d1\u9001\u5fae\u4fe1\u6d88\u606f\u7684\u51fd\u6570\u5e76\u4f20\u5165\u7fa4\u540d\u79f0\n            return warning_message\n\n    def handle_file_deletion(filepath):\n        import subprocess\n        import sys\n        if sys.platform.startswith('win32'):\n            command = f'del /f /q '{filepath}''\n        else:\n            command = f'rm -f '{filepath}''\n        try:\n            subprocess.run(command, shell=True, check=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n            output_text.insert(tk.END, f'\u6587\u4ef6 {filepath} \u5df2\u6210\u529f\u5220\u9664\\n')\n        except subprocess.CalledProcessError as e:\n            output_text.insert(tk.END, f'\u9519\u8bef: \u5220\u9664\u6587\u4ef6 {filepath} \u65f6\u51fa\u9519: {str(e)}\\n')\n        except Exception as e:\n            output_text.insert(tk.END, f'\u5176\u4ed6\u9519\u8bef: {str(e)}\\n')\n\n    try:\n        result = upload(filepath)\n        response_data = json.loads(result)\n        uuid = response_data.get('uuid')\n        if uuid:\n            analysis_result = analysis(uuid)\n            analysis_data = json.loads(analysis_result)\n            message = handle_analysis_result(analysis_data)\n            handle_file_deletion(filepath)\n        else:\n            warning_message = '\u8b66\u544a: \u672a\u80fd\u83b7\u53d6UUID\\n'\n            output_text.delete(1.0, tk.END)\n            output_text.insert(tk.END, warning_message)\n            copy_to_clipboard(output_text)\n            send_to_wechat(warning_message, target_group_name)  # \u8c03\u7528\u53d1\u9001\u5fae\u4fe1\u6d88\u606f\u7684\u51fd\u6570\u5e76\u4f20\u5165\u7fa4\u540d\u79f0\n    except json.JSONDecodeError:\n        output_text.delete(1.0, tk.END)\n        output_text.insert(tk.END, '\u9519\u8bef: \u8fd4\u56de\u6570\u636e\u683c\u5f0f\u9519\u8bef\uff0c\u65e0\u6cd5\u89e3\u6790JSON\\n')\n        send_to_wechat('\u9519\u8bef: \u8fd4\u56de\u6570\u636e\u683c\u5f0f\u9519\u8bef\uff0c\u65e0\u6cd5\u89e3\u6790JSON\\n', target_group_name)  # \u8c03\u7528\u53d1\u9001\u5fae\u4fe1\u6d88\u606f\u7684\u51fd\u6570\u5e76\u4f20\u5165\u7fa4\u540d\u79f0\n    except Exception as e:\n        output_text.delete(1.0, tk.END)\n        output_text.insert(tk.END, f'\u9519\u8bef: \u53d1\u751f\u9519\u8bef: {str(e)}\\n')\n        send_to_wechat(f'\u9519\u8bef: \u53d1\u751f\u9519\u8bef: {str(e)}\\n', target_group_name)  # \u8c03\u7528\u53d1\u9001\u5fae\u4fe1\u6d88\u606f\u7684\u51fd\u6570\u5e76\u4f20\u5165\u7fa4\u540d\u79f0\n\n\nclass MonitorApp:\n    def __init__(self, master):\n        self.master = master\n        self.master.title('\u6587\u4ef6\u76d1\u63a7\u5de5\u5177')\n        self.master.geometry('500x450')  # \u589e\u52a0\u9ad8\u5ea6\u4ee5\u5bb9\u7eb3\u65b0\u7ec4\u4ef6\n\n        self.label_group = tk.Label(master, text='\u76ee\u6807\u7fa4\u540d\u79f0:')  # \u65b0\u589e\u6807\u7b7e\n        self.label_group.pack(pady=10)\n\n        self.group_entry = tk.Entry(master, width=50)  # \u65b0\u589e\u8f93\u5165\u6846\n        self.group_entry.pack(pady=10)\n\n        self.label = tk.Label(master, text='\u76d1\u63a7\u76ee\u5f55:')\n        self.label.pack(pady=10)\n\n        self.directory_entry = tk.Entry(master, width=50)\n        self.directory_entry.pack(pady=10)\n\n        self.start_button = tk.Button(master, text='\u5f00\u59cb\u76d1\u63a7', command=self.start_monitoring)\n        self.start_button.pack(pady=10)\n\n        self.stop_button = tk.Button(master, text='\u505c\u6b62\u76d1\u63a7', command=self.stop_monitoring)\n        self.stop_button.pack(pady=10)\n\n        self.output_text = scrolledtext.ScrolledText(master, width=60, height=15)\n        self.output_text.pack(pady=10)\n\n        self.observer = None\n        self.is_running = False\n\n    def start_monitoring(self):\n        group_name = self.group_entry.get().strip()  # \u83b7\u53d6\u7fa4\u540d\u79f0\n        directory = self.directory_entry.get().strip()\n        if not os.path.isdir(directory):\n            messagebox.showerror('\u9519\u8bef', '\u8bf7\u8f93\u5165\u6709\u6548\u7684\u76ee\u5f55\u8def\u5f84\uff01')\n            return\n\n        self.is_running = True\n        self.output_text.insert(tk.END, f'\u5f00\u59cb\u76d1\u63a7\u76ee\u5f55: {directory}\\n')\n        self.output_text.yview(tk.END)\n\n        event_handler = DumpFileHandler(self.output_text, lambda filepath: process_file(filepath, self.output_text, group_name))  # \u4f20\u5165\u7fa4\u540d\u79f0\n        self.observer = Observer()\n        self.observer.schedule(event_handler, directory, recursive=False)\n        self.observer.start()\n        threading.Thread(target=self.run_observer, daemon=True).start()\n\n    def run_observer(self):\n        try:\n            while self.is_running:\n                time.sleep(1)\n        except Exception as e:\n            self.output_text.insert(tk.END, f'\u76d1\u63a7\u51fa\u9519: {str(e)}\\n')\n            self.output_text.yview(tk.END)\n\n    def stop_monitoring(self):\n        self.is_running = False\n        if self.observer:\n            self.observer.stop()\n            self.observer.join()\n        self.output_text.insert(tk.END, '\u76d1\u63a7\u5df2\u505c\u6b62\u3002", "top": 0, "createdAt": 1737341602, "style": "", "script": "", "head": "", "ogImage": "https://avatars.githubusercontent.com/u/64282354?v=4", "createdDate": "2025-01-20", "dateLabelColor": "#0969da"}, "P3": {"htmlDir": "docs/post/wxdump-ji-qi-ren-de-zui-zhong-ban.html", "labels": ["\u7f16\u7a0b"], "postTitle": "wxdump\u673a\u5668\u4eba\u7684\u6700\u7ec8\u7248", "postUrl": "post/wxdump-ji-qi-ren-de-zui-zhong-ban.html", "postSourceUrl": "https://github.com/edc8/edc8.github.io/issues/3", "commentNum": 0, "wordCount": 12023, "description": "## \u6298\u817e\u6765\u6298\u817e\u53bb\u7684\u53d1\u73b0\u8fd8\u662f\u5199\u8fd9\u4e2a\u7248\u672c\u66f4\u597d\u7528\n### \u53d6\u6d88\u5173\u952e\u8bcd\u81ea\u52a8\u56de\u590d\uff0c\u522b\u95ee\u4e3a\u4ec0\u4e48\uff0c\u4e0d\u591f\u7a33\u5b9a\uff0c\u9700\u8981\u65f6\u523b\u7684\u76d1\u63a7wx\u7684\u804a\u5929\u8bb0\u5f55 \u3002", "top": 0, "createdAt": 1737430755, "style": "", "script": "", "head": "", "ogImage": "https://avatars.githubusercontent.com/u/64282354?v=4", "createdDate": "2025-01-21", "dateLabelColor": "#0969da"}}, "singeListJson": {}, "labelColorDict": {"\u4eb2\u5b50": "#7057ff", "\u751f\u6d3b": "#d876e3", "\u7f16\u7a0b": "#d73a4a", "\u7f51\u7edc": "#0075ca"}, "displayTitle": "Hex Blog", "faviconUrl": "https://avatars.githubusercontent.com/u/64282354?v=4", "ogImage": "https://avatars.githubusercontent.com/u/64282354?v=4", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://edc8.github.io", "prevUrl": "disabled", "nextUrl": "disabled"}